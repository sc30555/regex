- name: Pattern match to get peer group
  set_fact:
    peergroup: "{{host|regex_findall('neighbor \\b[a-zA-Z_a-zA-Z]\\w+\\b peer group')|length}}"
    peergrouppwd: "{{host|regex_findall('neighbor \\b[a-zA-Z_a-zA-Z]\\w+\\b password 7 *')|length}}"
- name: split by lines
  set_fact: 
    peergroupsplitlines: "{{(host|regex_findall('neighbor \\b[a-zA-Z_a-zA-Z]\\w+\\b peer group',multiline=true)|regex_replace('\\n', '.')).split('.') }}"
- name: split by spaces and get peer group name
  debug: 
    msg: "{{(item|regex_findall('neighbor \\b[a-zA-Z_a-zA-Z]\\w+\\b peer group')|regex_replace(' ', ':')).split(':').1}}"
  register: peergroupnames
  with_items:
    - "{{peergroupsplitlines.0.split(',')}}"
- name: debug
  debug:
    msg: "{{item.msg}}"
  with_items:
    - "{{peergroupnames.results}}"
  